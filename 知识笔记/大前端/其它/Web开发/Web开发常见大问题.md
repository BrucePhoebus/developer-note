# Web开发常见大问题

## JavaScript和CSS的版本问题

#### 问题简述

* 我们都知道 JavaScript和CSS属于静态文件，如果地址不变，浏览器会缓存这些文件，那就意味着当我们需要改JavaScript或者CSS文件的时候，即使我们后端改了，那么客户端也是看不到，这个在“JS一统天下”的时代是不可接受的，因为现在几乎所有的WEB 程序都严重依赖JavaScript，而所有的网站都是需要使用CSS的。

* 每当后端出现修改，例如文件替换，但是客户端存在缓存，用户刷新一般是无法解决问题的，当然`Ctrl+F5`可以`清除浏览器缓存`，但是有多少用户会使用？总之这样体验不好。

#### 解决办法

1. 方法一：加一个版本号（已过时）

	比如原来是 http://www.a.com/app.js 我们现在只需要把地址改为http://www.a.com/app.js?v=1.0 即可

> 但这只适用于小项目，其实一般项目都不适应，因为如果出现多个要更改的情况，那人为因素经常会出问题，也就会经常出现bug，所以这种方法已经过时了，现在我们一般都会使用构建化工具

2. 使用前端构建化工具

	也就是我们一般都会使用构建化工具进行项目打包，这样我们可以通过给项目添加文件的hash实现文件唯一性，这样如果文件出现变更，那么一般浏览器都能识别出来，然后自动更新

> 当然，大型复杂项目也会出现一些更复杂的问题，例如后台文件和项目更新等问题，这样需要指定的解决方法，一般项目使用构建化工具便能解决这个问题

## JavaScript和CSS的依赖问题

	JavaScript和CSS的依赖问题，说的通俗点就是JavaScript和CSS的在页面中的顺序问题！

#### 问题描述

* 我们经常发现CSS没起作用，JavaScript的某个变量和方法找不到，有很多情况都是因为引入JavaScript或者CSS的顺序不对，虽然我们可以使用一些RequireJS之类的模块管理，但是依然在很多情况下需要引入不同的文件，尤其是CSS没有一个好的模块化管理的组件。

#### 问题解决

* 所以我们就需要有一个统一的地方来管理JavaScript和CSS的顺序问题，例如：Gulp

## 性能优化问题

#### 问题描述

* 我们都知道浏览器请求的文件越多越耗时，请求的文件越大越耗时，尤其是在我们现在很多使用前端MVC, MVVM框架的时候，我们为了前端代码更清晰，结构更合理，我们就由很多JS文件，无疑又拖慢了网页的速度。

#### 问题解决

1. 文件合并

	浏览器需要下载多个JS文件，而浏览器是有并发限制，也就是同时并发只能下载几个文件，假如浏览器并发数是5，我们有20个JS文件，而每5个需要2S, 那么你光下载JS文件都需要8S，那么网页的性能可想而知，所以我们需要合并多个文件以减少文件的数量。
	也就是将一些小的文件合并成一个文件进行传输

2. 文件压缩

	我们知道文件越大，下载越慢，而针对JavaScript和CSS, 里面的空格，换行这些都是为了让我们读代码时更容易阅读，但是对机器来说，这些对它没有影响，所以为了减少文件大小，一般的情况我们都会用工具去掉空格和换行，有时候我们还会用比较短的变量名(记住这个要让工具最后压缩时做，而源代码一定要保证命名可读性) 来减少文件大小。

> 我们一般项目都会进行JS/CSS/图片或进行Gzip等压缩，而这些都需要构建工具进行管理

## 效率问题

#### Vendor前缀

**问题描述**

	在CSS3使用越来越多的时候，我们都知道一些CSS的特性，不同的浏览器CSS有不同的前缀，如果我们手工添加将会很繁琐

**问题解决**

	这个问题当然得使用工具解决啦，也就是前端构建化工具，现在的构建化工具都能自动给CSS添加Vendor前缀

#### 单元测试

	JavaScript的单元测试在使用MVC或者MVVM的框架后，变得越来越容易，而单元测试是质量保证的一个很重要的手段，所以在提交之前，使用构建工具自动跑一遍我们的单元测试是非常重要的

#### 代码分析

	我们写的JavaScript很多时候会有一些潜在的bug, 比如忘了添加分号，某个变量没有等等，使用一些JavaScript的代码分析工具，可以很好的帮我们检查一些常见的问题。

> 一般我们在项目创建的时候就会定好项目规范，主要是JavaScript/CSS/HTML缩进、空格、换行、注释等一系列规范，而使用代码分析工具或代码规范工具能更好的进行项目开发

#### HTML引用JavaScript或者CSS文件

	比如我们需要使用Bower之类来引用前端JavaScript和CSS的第三方库，那么如果版本升级，添加移除等都用手工来修改HTML的话，第一比较耗时，第二比较容易疏漏，尤其是在我们需要切换Debug和production版本时将会有很多额外的工作，那么使用前端构建工具可以很好的解决这些问题

> 参考：[Gulp应用场景](https://www.cnblogs.com/knyel/p/7826687.html)
