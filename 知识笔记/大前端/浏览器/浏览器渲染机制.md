# 浏览器渲染机制

## 浏览器请求URL到页面展示

#### 一、根据URL生成请求报文

	* 请求行 包含请求方式(get/post)、资源标识符(url)、协议版本(http 1.1/http 2.0)

	* 请求头 就是一些请求参数,常见的有Accept/Host/Content-Type/Referer

	* 消息体 请求内容(可有可无)

> 这一步是浏览器解析URL，生成请求报文

#### 二、域名解析

1. 查找浏览器的DNS缓存

2. 查找本地hosts是否有映射关系

3. 查找本地DNS服务器

4. 递归查询域名服务器

> 在这一步通过域名拿到服务器的ip地址，对请求进行域名分析

#### 三、建立TCP连接（TCP的三次握手）并发起http请求

	仅第一次请求需要三次握手，再次请求同域名下的资源就不需要这个开销了

#### 四、服务器处理并返回信息，浏览器接收信息并渲染页面

	服务器处理逻辑，完成后返回信息，即响应报文

**返回的响应报文**

* 状态行

	包括http协议版本(http 1.1)、状态码(200)、状态说明(ok)

* 响应头
	
	一些相应参数，常见的有Content-Type/Access-Control-Allow-Origin/Set-Cookie

* 消息体

	返回的信息(例如html文档/json数据块)

> 浏览器接到响应报文后，解析并渲染，会先解析渲染html页面，随后里面的静态资源，例如img和script会再次发http请求

#### 五、TCP四次挥手，关闭连接

	到了这一步说明请求结束，客户端与服务端的http连接结束


